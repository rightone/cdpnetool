# 快速开始

本章节将帮助你在 5 分钟内完成 cdpnetool 的安装、配置和第一个网络拦截规则的创建。

---

## 环境要求

- **操作系统**：Windows 10/11（提供官方安装包）、macOS、Linux（理论支持，欢迎反馈）
- **浏览器**：Chrome/Chromium/Edge 浏览器（可选，工具可内置启动）
- **其他**：无需安装额外依赖

---

## 安装与运行

### 方式一：使用预编译版本（推荐）

#### Windows 用户

1. 访问 [GitHub Releases](https://github.com/241x/cdpnetool/releases) 页面
2. 下载最新版本的 Windows 安装包
3. 运行 `.exe` 安装程序，按提示完成安装
4. 或下载便携版 `.zip`，解压后直接运行

#### macOS 和 Linux 用户

> ⚠️ **注意**：目前官方仅提供 Windows 安装包，macOS 和 Linux 平台理论上支持但未经完整测试。如果您在这些平台上运行遇到问题，欢迎通过 [Issues](https://github.com/241x/cdpnetool/issues) 反馈。

由于暂未提供预编译版本，请参考下方「从源码构建」方式。

---

### 方式二：从源码构建

如果您想从源码运行或参与开发，需要以下环境：

#### 前置要求

- Go 1.21+
- Node.js 16+
- Wails CLI v2

#### 构建步骤

**1. 克隆项目**

```bash
git clone https://github.com/241x/cdpnetool.git
cd cdpnetool
```

**2. 安装 Wails CLI**（如果尚未安装）

```bash
go install github.com/wailsapp/wails/v2/cmd/wails@latest
```

**3. 开发模式运行**

```bash
wails dev
```

**4. 构建生产版本**

```bash
wails build
```

构建完成后，可执行文件位于 `build/bin/` 目录下。

> 💡 **提示**：详细的开发配置和构建说明请参考 [开发指南](./07-development.md)

---

## 5 分钟上手教程

### 步骤 1：启动浏览器

1. 打开 cdpnetool 应用
2. 点击工具栏左侧的「启动浏览器」按钮
3. 工具会自动启动一个独立的 Chrome 实例
4. DevTools URL 会自动填充到输入框（通常是 `http://localhost:9222`）

> 💡 **提示**：如果您想使用已运行的浏览器，可以手动输入其 DevTools URL

---

### 步骤 2：连接到浏览器

1. 确认 DevTools URL 正确填写
2. 点击「连接」按钮
3. 连接成功后，状态指示器变为绿色并显示「已连接」

> ⚠️ **常见问题**：如果连接失败，请检查：
> - 浏览器是否正常启动
> - DevTools URL 格式是否正确（`http://localhost:端口号`）
> - 端口是否被防火墙拦截

---

### 步骤 3：附加目标页面

1. 切换到「Targets」标签页
2. 点击右上角的刷新按钮获取页面列表
3. 在目标列表中找到要拦截的页面
4. 点击页面右侧的「附加」按钮
5. 按钮变为「已附加」状态

> 💡 **说明**：cdpnetool 采用单 Target 模式，同时只能附加一个页面。切换目标时会自动分离旧目标。

---

### 步骤 4：创建第一个规则配置

1. 切换到「Rules」标签页
2. 如果还没有配置，点击左侧的「+」按钮创建新配置
3. 配置会自动生成默认名称，可以双击重命名为「测试配置」

#### 添加规则

点击右侧的「添加规则」按钮，开始配置规则：

**基本信息：**
- 修改规则名称：`Mock 用户信息接口`
- 保持规则启用状态（默认）
- 阶段选择：`response`（响应阶段）

**配置匹配条件（Match）：**
1. 在「AllOf」区域点击「添加条件」
2. 条件类型选择：`urlContains`（URL 包含）
3. 输入匹配值：`/api/user/info`

**配置执行行为（Actions）：**
1. 点击「添加行为」
2. 行为类型选择：`setBody`（设置响应体）
3. 输入 JSON 数据：

```json
{
  "code": 0,
  "data": {
    "id": 1,
    "name": "测试用户",
    "email": "test@example.com"
  }
}
```

4. 按 `Ctrl+S`（Windows）或 `Cmd+S`（macOS）保存配置

---

### 步骤 5：启用拦截

1. 在左侧配置列表中，找到刚创建的「测试配置」
2. 点击配置左侧的开关按钮
3. 工具会提示「配置「测试配置」已启用」
4. 配置项会显示绿色的「· 运行中」标识

> ⚠️ **注意**：启用拦截前必须先完成「连接浏览器」和「附加目标」两个步骤

---

### 步骤 6：测试效果

1. 在浏览器中访问包含 `/api/user/info` 接口的页面
2. 切换到「Events」标签页
3. 在「匹配的请求」列表中可以看到刚才拦截的请求
4. 点击事件卡片查看详情，确认响应体已被替换为我们配置的 JSON 数据

> 🎉 **恭喜**！你已经成功完成了第一个网络拦截规则

---

## 界面功能简介

### 顶部工具栏

- **启动浏览器**：一键启动独立 Chrome 实例
- **DevTools URL 输入框**：手动输入或自动填充浏览器调试地址
- **连接/断开按钮**：管理与浏览器的连接状态
- **刷新按钮**：重新获取目标页面列表
- **状态指示器**：显示连接状态和已附加目标数量
- **主题切换**：深色/浅色模式切换

### Targets 面板（目标管理）

- 查看当前浏览器中的所有页面标签
- 显示页面标题和 URL
- 附加/分离目标页面

### Rules 面板（规则配置）

- **左侧**：配置列表，支持新建、切换、重命名、删除
- **右侧**：规则编辑器
  - 可视化编辑模式（默认）
  - JSON 源码编辑模式（高级）
- **配置管理**：导入/导出、保存、启用/禁用

### Events 面板（事件监控）

- **匹配的请求**：显示命中规则的请求列表
- **未匹配的请求**：显示未命中规则的请求列表
- **事件详情**：DevTools 风格的请求响应查看面板
  - 请求详情（URL、方法、请求头、请求体）
  - 响应详情（状态码、响应头、响应体）
  - 匹配规则信息

---

## 常用操作提示

### 快捷键

- `Ctrl/Cmd + S`：保存当前配置

### 配置管理技巧

- 创建多个配置，针对不同场景快速切换
- 配置文件为标准 JSON 格式，可导出分享给团队成员
- 导入配置时会自动验证格式和兼容性

### 拦截注意事项

- 修改规则后需要重新保存才能生效
- 如果配置已启用，保存后会自动重载规则
- 切换附加目标时，拦截会自动停止，需要重新启用
- 断开连接会停止拦截并清空事件列表

### 常见连接问题

- **无法连接**：检查 DevTools URL 格式（`http://localhost:端口`）
- **连接断开**：浏览器关闭或网络异常会导致连接中断
- **端口占用**：如果 9222 端口被占用，工具会自动选择其他端口

---

## 下一步学习

🎉 恭喜！你已经掌握了 cdpnetool 的基本使用方法。接下来可以：

- 📚 查看 [规则配置参考](./03-rule-reference.md)，学习所有匹配条件和行为类型
- ❓ 遇到问题？查看 [常见问题](./04-faq.md) 寻找解决方案
